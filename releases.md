# Releases
## v6.3.0
Share locked boards between user for collaboration

This release brings shared boards to Entur-Tavla! With this feature, you can share your locked boards with other for easier management and collaboration. This is great for hotels and other institutions where several people should have access to update and edit a board while still having the board locked to prevent unauthorised alterations.

Sharing happens through the ¬´Deling¬ª-tab of a board's settings. Here, all owners will have access to invite users, as well as remove pending invites and current owners. Those receiving an invite can either accept or decline it under ¬´Mine tavler¬ª --> ¬´Invitasjoner¬ª. 

All invite and owner information under ¬´Deling¬ª and ¬´Invitasjoner¬ª updates live and let's you keep track of your boards current state without having to refresh the page. 

### Demo 

https://github.com/entur/tavla/assets/46536611/a949d057-5f90-4de0-8e84-34e4d39f7808


In addition to shared boards, the release also includes several fixes and package updates. See complete change-log below: 


### What's Changed

* 6.2.0 by @Collatty in https://github.com/entur/tavla/pull/490

* F√• Firebase Analytics oppe √• rulle igjen  by @magnusrand in https://github.com/entur/tavla/pull/485

* Update CSP in Firebase to allow Analytics data by @magnusrand in https://github.com/entur/tavla/pull/492

* Bedre byggetid i dev for webpack by @magnusrand in https://github.com/entur/tavla/pull/489

* Fix typo by @Collatty in https://github.com/entur/tavla/pull/491

* Make CSP conditional based on development run or not by @magnusrand in https://github.com/entur/tavla/pull/494

* Instillinger for live data by @Collatty in https://github.com/entur/tavla/pull/493

* Sm√• endringer i DashboardHeader by @magnusrand in https://github.com/entur/tavla/pull/495

* Use useUser context throughout app by @Collatty in https://github.com/entur/tavla/pull/496

* Change deletion path for logo to be based on URL by @magnusrand in https://github.com/entur/tavla/pull/497

* Upgrade packages in functions by @magnusrand in https://github.com/entur/tavla/pull/498

* Add dependabot config file to set up dependabot weekly update checks by @magnusrand in https://github.com/entur/tavla/pull/500

* Bump postcss-loader from 6.1.1 to 6.2.0 by @dependabot in https://github.com/entur/tavla/pull/506

* Bump @typescript-eslint/eslint-plugin from 4.31.0 to 4.33.0 by @dependabot in https://github.com/entur/tavla/pull/508

* Bump typescript from 3.9.10 to 4.4.4 in /functions by @dependabot in https://github.com/entur/tavla/pull/501

* Bump webpack-cli from 4.8.0 to 4.9.1 by @dependabot in https://github.com/entur/tavla/pull/503

* Bump sass-loader from 12.1.0 to 12.2.0 by @dependabot in https://github.com/entur/tavla/pull/504

* Bump @typescript-eslint/parser from 4.31.0 to 4.33.0 by @dependabot in https://github.com/entur/tavla/pull/505

* Revert \"Bump typescript from 3.9.10 to 4.4.4 in /functions\" by @magnusrand in https://github.com/entur/tavla/pull/513

* Bump date-fns from 2.23.0 to 2.25.0 by @dependabot in https://github.com/entur/tavla/pull/509

* Improve custom url backend by @magnusrand in https://github.com/entur/tavla/pull/499

* Increase z-index of weather-tile in map view by @Collatty in https://github.com/entur/tavla/pull/515

* Bump @types/react-router-dom from 5.1.8 to 5.3.2 by @dependabot in https://github.com/entur/tavla/pull/514

* Bump react and react-dom by @dependabot in https://github.com/entur/tavla/pull/512

* Update dependabot to try fix update interval by @magnusrand in https://github.com/entur/tavla/pull/521

* Remove @firebase/util from package.json by @dependabot in https://github.com/entur/tavla/pull/510

* Bump @types/react-grid-layout from 1.1.2 to 1.3.0 by @dependabot in https://github.com/entur/tavla/pull/518

* Bump @babel/core from 7.15.5 to 7.16.0 by @dependabot in https://github.com/entur/tavla/pull/520

* Bump firebase-admin from 9.12.0 to 10.0.0 in /functions by @dependabot in https://github.com/entur/tavla/pull/502

* Bump firebase-functions from 3.15.7 to 3.16.0 in /functions by @dependabot in https://github.com/entur/tavla/pull/516

* Bump typescript from 3.9.10 to 4.4.4 in /functions by @dependabot in https://github.com/entur/tavla/pull/517

* Bump sass-loader from 12.2.0 to 12.3.0 by @dependabot in https://github.com/entur/tavla/pull/519

* Bump eslint-plugin-import from 2.24.2 to 2.25.2 by @dependabot in https://github.com/entur/tavla/pull/522

* Bump @babel/plugin-proposal-class-properties from 7.14.5 to 7.16.0 by @dependabot in https://github.com/entur/tavla/pull/523

* Bump @entur/icons from 3.1.0 to 3.3.0 by @dependabot in https://github.com/entur/tavla/pull/525

* Gj√∏r tavla mer klimavennlig! by @Collatty in https://github.com/entur/tavla/pull/529

* Fix all lint warnings by @magnusrand in https://github.com/entur/tavla/pull/528

* Bump eslint-plugin-react-hooks from 4.2.0 to 4.3.0 by @dependabot in https://github.com/entur/tavla/pull/530

* Bump prettier from 2.3.2 to 2.4.1 by @dependabot in https://github.com/entur/tavla/pull/526

* Bump date-fns from 2.25.0 to 2.26.0 by @dependabot in https://github.com/entur/tavla/pull/531

* Bump typescript from 4.4.4 to 4.5.2 in /functions by @dependabot in https://github.com/entur/tavla/pull/533

* Gj√∏r at bunnmenyen forblir synlig p√• mobil ved innlasting by @magnusrand in https://github.com/entur/tavla/pull/536

* Bump @types/react-dom from 16.9.14 to 17.0.11 by @dependabot in https://github.com/entur/tavla/pull/535

* Endre h√∏yden p√• v√¶rinnstillinger i settings by @magnusrand in https://github.com/entur/tavla/pull/537

* Multiple owner of a board by @magnusrand in https://github.com/entur/tavla/pull/524

* Sm√•fikser for delte tavler by @magnusrand in https://github.com/entur/tavla/pull/539

* Legg til manglende indeksfil for at deploy ikke skal feile by @magnusrand in https://github.com/entur/tavla/pull/540

* Oppdater indeksfil til √• korrespondere med Firebase-console by @magnusrand in https://github.com/entur/tavla/pull/542

* Fix remove self from board not being async await by @magnusrand in https://github.com/entur/tavla/pull/545

* Lasteindikator og fjerning av scrollbars p√• chrome og safari by @Collatty in https://github.com/entur/tavla/pull/544





**Full Changelog**: https://github.com/entur/tavla/compare/v6.2.0...v6.3.0
## v6.2.0
Live vehicle positions in map

This release introduces live positions for vehicles in an array of cities throughout Norway. At the time of writing mainly busses and trams provide live data. To turn the feature on, head over to \"rediger\" when you are on your board, and toggle \"sanntidsposisjoner\". From here you can select which lines to display live in your map. To see more details you can hover over a vehicle. 


![v6 2 0_vehicles](https://github.com/entur/tavla/assets/46536611/875e60f8-b074-407d-85ec-882638e7c529)



### What's Changed

* Sanntidsposisjoner by @Collatty in https://github.com/entur/tavla/pull/474

* Readable tooltip for dark theme by @Collatty in https://github.com/entur/tavla/pull/477

* Make functionality for hiding menu on scroll work as intended by @magnusrand in https://github.com/entur/tavla/pull/478

* Enforce import grouping, react first, siblings last by @draperunner in https://github.com/entur/tavla/pull/479

* Skjule sanntidsdata vha innstillinger by @Collatty in https://github.com/entur/tavla/pull/480

* Fix manifest invalid src error by @Collatty in https://github.com/entur/tavla/pull/481

* Fikse \"can't read x of undefined\" error by @Collatty in https://github.com/entur/tavla/pull/482

* Update forms by @magnusrand in https://github.com/entur/tavla/pull/483

* Live data by @Collatty in https://github.com/entur/tavla/pull/484

* Line route overlay by @Collatty in https://github.com/entur/tavla/pull/487

* Fix permissions-policy header by @Collatty in https://github.com/entur/tavla/pull/488





**Full Changelog**: https://github.com/entur/tavla/compare/v6.1.0...v6.2.0
## v6.1.0
Weather tile available in Entur-Tavla

The release brings a new weather tile to the board! You can now turn on the new tile in your board settings and have live weather updates available at a glance. The weather data is provided by [Metrologisk Institutt](met.no), the same data provider as YR uses. 



The weather tile is available in compact, chronological and map view. 


### Weather Tile
![v6 1 0_weather_tile](https://github.com/entur/tavla/assets/46536611/bef4e610-ebe7-4450-a0b1-e1bcf80a139c)

### Resizable
![v6 1 0_resizable](https://github.com/entur/tavla/assets/46536611/ab3daff2-23a5-4610-a851-50f0d3c20d3b)

### Customizable
![v6 1 0_customizable](https://github.com/entur/tavla/assets/46536611/e117cb12-76ef-4aad-a196-6752d31e111c)

### In map view
![v6 1 0_in_map png](https://github.com/entur/tavla/assets/46536611/63b353af-67ce-4db3-a6d0-00b8272b8609)

### Settings for weather tile
![v6 1 0_weather](https://github.com/entur/tavla/assets/46536611/3ef753ca-3263-43f6-bfa2-ff424f928027)

### What's Changed

* Fikse uendelig loop i useeffekten til holdeplass-view by @Collatty in https://github.com/entur/tavla/pull/454

* Upgrade webpack by @Collatty in https://github.com/entur/tavla/pull/455

* Set correct .env variables by @Collatty in https://github.com/entur/tavla/pull/457

* Upgrade typescript by @Collatty in https://github.com/entur/tavla/pull/458

* Oppgradere pakker by @Collatty in https://github.com/entur/tavla/pull/459

* Upgrade mapbox by @Collatty in https://github.com/entur/tavla/pull/460

* Horisontal scrolling av avgangstider by @bendiksk in https://github.com/entur/tavla/pull/461

* Upgrade firebase by @Collatty in https://github.com/entur/tavla/pull/462

* Whitelist apis.google.com in Content-Security-Policy header by @Collatty in https://github.com/entur/tavla/pull/465

* Legg til v√¶rmelding-tile-funksjonalitet i EnTur-tavla by @magnusrand in https://github.com/entur/tavla/pull/463

* Tillate firebase √• injecte en iframe for mobilenheter by @Collatty in https://github.com/entur/tavla/pull/466

* Avoid overwriting locally stored layout on refresh for chrono view by @Collatty in https://github.com/entur/tavla/pull/467

* Fiks ¬´A component is changing an uncontrolled input of type checkbox to be controlled.¬ª-feil i Admin-panelet by @magnusrand in https://github.com/entur/tavla/pull/469

* Fikse feilmelding om src URL in Manifest invalid  by @magnusrand in https://github.com/entur/tavla/pull/468

* Revert \"Fikse feilmelding om src URL in Manifest invalid \" by @magnusrand in https://github.com/entur/tavla/pull/471

* Fix app not redirecting to root on page that doesnt exist by @magnusrand in https://github.com/entur/tavla/pull/472

* üö≤ Bike station migration üö≤ : Moving to mobility API (v2) by @bendiksk in https://github.com/entur/tavla/pull/470

* Nytt design p√• WeatherTile by @magnusrand in https://github.com/entur/tavla/pull/475





**Full Changelog**: https://github.com/entur/tavla/compare/v6.0.0...v6.1.0
## v6.0.0
Custom URLs, Bolt scooters in map, EnTur SDK integration, package upgrades and fixes

### Custom URLs

When editing a board by clicking ¬´Rediger¬ª, there is now a new editing option available under the tab ¬´Endre lenke¬ª. This option lets you set a custom URL for your board, e.g. `tavla.entur.no/t/my_custom_board`. The tab is showcased below:


![v6_custom](https://github.com/entur/tavla/assets/46536611/493df176-d7bc-4760-89e1-2919de57b1b6)



### Bolt scooters in map

The new EnTur-SDK provides a new type of scooter for the map. Bolt is now visible if the map and ¬´Sparkesykler¬ª is turned on in the board settings. The image above shows the Bolt logo where Bolt scooters are placed.



![v6_bolt](https://github.com/entur/tavla/assets/46536611/00f23030-14cb-4c66-9d8e-22ce02c224e8)



### Other additions: 



- Uploaded logos can now be deleted

- Most `@entur/*` packages and a handfull external packages have been updated to their latest version in this release, which provides more stability and better security. 

- A local developer environment is now available for Firebase which allows for safer testing of Firebase functionality

- Login now gives more general feedback, i.e. ¬´Wrong username or password¬ª instead of ¬´Wrong password¬ª



### Fixes: 

- Divider line colors in dark theme have been corrected

- Icon colors in light theme have been corrected

- Warning about keys not being unique is ¬´Kronologisk¬ª, ¬´Tidslinje¬ª and ¬´Holdeplass¬ª views have been fixed

- `ValidateDomNesting` error in ¬´Holdeplass¬ª view has been fixed
## v5.7.0
New View \"Holdeplass\" and Clustering of Scooters and Bikes



The new View (visning) named \"Holdeplass\" is suitable for showing one or few stop places. Situations will be written out in the third column, as you can see in the example below:




<img width="1909" alt="v5 7 0_stop_place" src="https://github.com/entur/tavla/assets/46536611/0a2bd147-642c-4166-805b-4bfd18bc2fe2">



We are now also clustering scooters and bike stations in the map, so that we don't show all the individual entities, but group them like this:


<img width="456" alt="v5 7 0_map" src="https://github.com/entur/tavla/assets/46536611/8f2a98b8-54db-44b5-8311-3da835565261">




## v5.6.0
Map View



We now have an entirely new view that brings the map to its full potential. It even displays walk times to the different stops. Check it out!


![v5 6 0_map](https://github.com/entur/tavla/assets/46536611/13464dd0-5886-4de5-a8ca-c1ddc46d98a7)



### Horizontal resizing

In the Compact view (Kompakt visning) you can now resize the boxes in the horizontal direction. Even more departures will be revealed if you expand the tiles.



![v5 6 0_horizontal](https://github.com/entur/tavla/assets/46536611/2bfda939-aeb5-404d-a282-adb0b4d120cc)



### Scooter view



The heading from the scooter tile is now removed, giving more room for the important stuff:


![v5 6 0_scooter_view](https://github.com/entur/tavla/assets/46536611/205184e0-6cb1-46e7-9217-6c85025886df)


## v5.5.0
We have a new front page design! üöÄ 



It's also easier to navigate to your existing boards from the top menu.


<img width="1903" alt="v5 5 0_landing" src="https://github.com/entur/tavla/assets/46536611/1b854a36-702f-468e-acdb-5ea27af959db">



## v5.4.0
### Scooters

<img width="609" alt="v5 4 0_scooters" src="https://github.com/entur/tavla/assets/46536611/ff8faa11-75da-43e6-92e4-4799397f2038">



You can now see scooters in your area on Tavla! We've introduced a map and you can configure which scooter operators you are interested in on the Admin page. Supported operators are Lime, Tier, Voi and Zvipp.



Enjoy!
## v5.3.0
v5.3.0 is a big one üëÄ 



The biggest news this release is the addition of the endpoint `/tavler` which makes it easier for users to administer, share, and delete their boards. Additionally, Tavla has become even better on mobile screens! üì±



* My boards

    * You can now view all the boards you are an owner of.

    * For each board, you can

        * Change the board name.

        * Share its link.

        * Unlock it by setting yourself as a non-owner.

        * Delete the board altogether.

    * The page also makes it easier to create new boards and navigate to their admin panels.

* UI

    * Tavla on mobile screens will now look even better, especially on the admin panel!
## v5.2.0
Here comes v5.2.0 ‚ú®



With this release you will be able to set a color theme for tavla! You can choose between four different themes. In addition, the header and the admin panel has been updated, and are now looking brand new! The new additions are:



* Theming 

    * Entur standard

    * Dark Theme

    * Light Theme

    * Grey Theme

* Brand new header in admin panel

* A new design of the admin panel

* Old tavler will see a banner requesting you to update your tavle to get the new features

* You will be able to lock tavla from admin-panel
## v5.1.0
Time for v5.1.0! üèÜ



In this release, further improvements to the admin panel and dashboard has been made. This include functionality for displaying a logo on the dashboard and a standalone tab for updating dashboard display type. The new additions are:

* A tab on the admin panel allowing for logo upload.

* Logo display on the dashboard in two formats.

    * 32px with a tagline beneath it.

    * 56px standalone logo.

* Adding and updating a description to your logo.

* A tab on the admin panel allowing for changing display types.
## v5.0.0
v5.0.0 is here! üéâ



The most notable changes is that you now have the ability to save and change your own tables, then persist it all in Firebase. The database changes include:

* Tables stored in databases.

* Login and logout functionality.

* Protect your table settings from changes made by other users.

* The usage of legacy URLs is still supported, but locking tables is not possible. Legacy URLs will eventually be unsupported.



Additionally, the UI has been improved on multiple fronts. The UI changes include:

* A new menu allowing for access to all the new features.

* Error pages with new design.

* A very minor start on the new design of the admin page, which will be gradually released in the coming weeks.
## v4.2.0
- Updated 404 message for location without stops.

- Icons for situations and cancellations are now shown for the relevant departures. For both chronological and compact view.

- Some minor bug fixes.
## v4.1.0
This release increases support for older browsers.
## v4.0.0
We've released a new version of Tavla with draggable items!

The items are now rearrangeable and vertically resizable. 


![v4_dnd](https://github.com/entur/tavla/assets/46536611/c509ab78-a554-46e2-82ee-dea60c91b0f4)


The position of the items on the board is stored to localStorage in the browser, and will not be persisted if the url is shared or in another browser. 



This solves the issue https://github.com/entur/tavla/issues/123 
## v3.0.0
We have now released Tavla with the option to switch between different dashboards/designs (visningstyper). Check out our [blog post about this (in Norwegian)](https://medium.com/entur/tavla-med-nye-visningstypar-9b2e3ac2491d).



_Dashboards_ are designs that might be radically different from other dashboards. They are completely independent of each other, but share the same data that comes from your own admin configurations.



The **Timeline** dashboard is a fun way to display departures, where the transport icons move toward their respective stop place. See the GIF below!



We encourage you to try and make your own creative dashboards. Check out [CONTRIBUTING.md](https://github.com/entur/tavla/blob/master/CONTRIBUTING.md) for a tutorial on how to do just that. If you haven't learned programming yet, but have an idea for a dashboard, please [tell us in an issue](https://github.com/entur/tavla/issues/new)!



![v3_timeline](https://github.com/entur/tavla/assets/46536611/f644943f-75da-41b4-b699-556e6abcbace)


## v2
We have been working on Tavla lately and here's what's new üéâ 



## Behavioral Changes



We use some other API calls behind the scenes now, especially for finding the nearest stop places within your specified radius. It is now based on walking distance. You might find that some stop places have disappeared, and maybe some new routes appear. It it likely that you would want to reconfigure your Tavla on the admin page.



## New Feature



You can now add multiple columns for the same stop place and make individual filtering per duplicate. Say you want two columns for Jernbanetorget, one for trams and one for buses. Or maybe you want two columns for Brynseng, one for lines going towards the city center, one for those going the other direction.



![v2](https://github.com/entur/tavla/assets/46536611/bc86bdf0-fe89-4d63-a5b6-a2847e6044c2)



## Technical Changes



### TypeScript

Using a static type system improves the developer experience by a ton. We now use TypeScript in this project.



### Hooks

All class components and lifecycle methods are replaced with function components using hooks! üé£ 

Some useful hooks we've made are the `useBikeRentalStations` and `useStopPlacesWithDepartures` that provide all the data needed for the dashboard view, based on the user's configuration.



### Refactoring

We have done a bunch of refactoring and rewritten a lot in order to separate concerns and scope functionality better. We've created more \"dumb\" components and rewritten a lot of styles to follow BEM naming convention for scoping.
